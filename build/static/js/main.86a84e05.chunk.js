(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(43)},28:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),c=a(19),r=a.n(c),s=a(4),l=(a(28),a(0)),i=a(8),u=function(e){var t=e.title,a=Object(l.g)().url;return o.a.createElement(i.b,{to:a,style:{textDecoration:"none"}},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,t)))},m=a(9),h=function(e){var t=e.shelf,a=e.shelves,c=e.onUpdate,r=Object.keys(a),l=Object(n.useState)("CLOSED"),i=Object(s.a)(l,2),u=i[0],h=i[1],b=function(){h("CLOSED")};return o.a.createElement("div",{className:"book-shelf-changer",onClick:function(){return"OPEN"===u?b():void h("OPEN")}},o.a.createElement("ul",{className:"CLOSED"===u?"hidden":"dropdown",onClick:function(e){var t=e.target.getAttribute("value");c(t)},onMouseLeave:b},o.a.createElement("li",{className:"book-shelf-menu-title",key:"move",value:"move"},"Move to..."),r.map(function(e){return o.a.createElement("li",{className:t===e?"checked":"",key:e,value:e},m.startCase(e))}),o.a.createElement("li",{key:"none",value:"none",className:"none"===t?"checked":""},"None")))},b=a(12),f="https://reactnd-books-api.udacity.com",d=localStorage.token;d||(d=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:d},E=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(b.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},k=function(e){e.title||(e.title=""),e.authors||(e.authors=""),e.imageLinks&&e.imageLinks.thumbnail||(e.imageLinks={thumbnail:""})},p=function(e){var t=e.book,a=e.shelves,c=e.onUpdate,r=Object(n.useState)(""),l=Object(s.a)(r,2),i=l[0],u=l[1],m=function(e){k(e),function(e,t){e.shelf="none",Object.entries(t).forEach(function(t){var a=Object(s.a)(t,2),n=a[0];a[1].indexOf(e.id)>=0&&(e.shelf=n)})}(e,a),u(e)};return Object(n.useEffect)(function(){var e;"string"!==typeof t?m(t):(e=t,fetch("".concat(f,"/books/").concat(e),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.book})).then(function(e){m(e)})},[t,a]),o.a.createElement("div",{className:"book"},"string"!==typeof i&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(i.imageLinks.thumbnail,")")}}),o.a.createElement(h,{shelf:i.shelf,shelves:a,onUpdate:function(e){c(i.id,e)}})),o.a.createElement("div",{className:"book-title"},"".concat(i.title)),o.a.createElement("div",{className:"book-authors"},"".concat(i.authors.toString()))))},g=function(e){var t=e.books,a=e.shelves,n=e.onUpdate;return o.a.createElement("ol",{className:"books-grid"},t.map(function(e,t){return o.a.createElement("li",{key:t},o.a.createElement(p,{book:e,shelves:a,onUpdate:n}))}))},y=a(21),O=a(17),j=function(e){var t=e.shelf,a=e.books,c=e.shelves,r=e.onUpdate,u="#".concat(m.kebabCase(t)),h=Object(n.useState)(!1),b=Object(s.a)(h,2),f=b[0],d=b[1],v=Object(l.g)().url,E=Object(l.f)();return Object(n.useEffect)(function(){E.hash===u?d(!0):d(!1)},[E,f]),o.a.createElement("div",{className:"bookshelf"},o.a.createElement(i.b,{style:{textDecoration:"none"},to:{pathname:v,hash:f?"":u}},o.a.createElement("h2",{className:"bookshelf-title"},m.startCase(t)+" ",o.a.createElement(y.a,{icon:f?O.b:O.a}))),o.a.createElement("div",{className:"".concat("bookshelf-books "+(f?"":"hidden"))},o.a.createElement(g,{books:a,shelves:c,onUpdate:r})))},N=function(){return o.a.createElement("div",{className:"open-search"},o.a.createElement(i.b,{to:"/search"},o.a.createElement("button",null)))},S=function(e){var t=e.shelves,a=e.onUpdate;return o.a.createElement("div",{className:"list-books"},o.a.createElement(u,{title:"My Reads"}),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,Object.entries(t).map(function(e){var n=Object(s.a)(e,2),c=n[0],r=n[1];return o.a.createElement(j,{key:c,shelf:c,books:r,shelves:t,onUpdate:a})}))),o.a.createElement(N,null))},C=a(22),U=["Android","Art","Artificial Intelligence","Astronomy","Austen","Baseball","Basketball","Bhagat","Biography","Brief","Business","Camus","Cervantes","Christie","Classics","Comics","Cook","Cricket","Cycling","Desai","Design","Development","Digital Marketing","Drama","Drawing","Dumas","Education","Everything","Fantasy","Film","Finance","First","Fitness","Football","Future","Games","Gandhi","Homer","Horror","Hugo","Ibsen","Journey","Kafka","King","Lahiri","Larsson","Learn","Literary Fiction","Make","Manage","Marquez","Money","Mystery","Negotiate","Painting","Philosophy","Photography","Poetry","Production","Programming","React","Redux","River","Robotics","Rowling","Satire","Science Fiction","Shakespeare","Singh","Swimming","Tale","Thrun","Time","Tolstoy","Travel","Ultimate","Virtual Reality","Web Development","iOS"],D=function(e){var t=e.shelves,a=e.onUpdate,c=Object(n.useState)(""),r=Object(s.a)(c,2),l=r[0],u=r[1],h=Object(n.useState)([]),d=Object(s.a)(h,2),E=d[0],p=d[1],y=Object(n.useState)(!1),O=Object(s.a)(y,2),j=O[0],N=O[1],S=m.debounce(function(e){(function(e){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(b.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})})(e).then(function(e){!e||e.error?p([]):(function(e){e&&Object(b.a)({},e.map(function(e){return k(e)}))}(e),p(e)),N(!1)})},250);Object(n.useEffect)(function(){S(l)},[l]);var D=function(e,t){E.filter(function(t){return t.id===e}).map(function(e){return e.shelf=t}),p(Object(C.a)(E)),a(e,t)},w=function(){return o.a.createElement("div",{className:"search-books-message"},o.a.createElement("p",null,"Type above to search."))},L=function(){return o.a.createElement("div",{className:"search-books-message"},o.a.createElement("p",null,"No books match your search!"),o.a.createElement("p",null,"Suggestions:"),o.a.createElement("ul",null,U.map(function(e){return o.a.createElement("li",{key:e},e)})))};return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(i.b,{to:"/"},o.a.createElement("button",{className:"close-search"})),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:l,onChange:function(e){return t=e.currentTarget.value,N(!0),void u(t);var t}}))),j?o.a.createElement("div",{className:"search-books-message"},o.a.createElement("p",null,"Searching...")):E&&E.length>0?o.a.createElement("div",{className:"search-books-results"},o.a.createElement(g,{books:E,shelves:t,onUpdate:D})):0===l.length?w():L())},w=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)(function(){E("-1","none").then(function(e){c(e)})},[]);var r=function(e,t){E({id:e},t).then(function(e){c(e)})};return o.a.createElement("div",{className:"app"},o.a.createElement(i.a,null,o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/"},o.a.createElement(S,{shelves:a,onUpdate:r})),o.a.createElement(l.a,{path:"/search"},o.a.createElement(D,{shelves:a,onUpdate:r})))))};a(41);r.a.render(o.a.createElement(w,null),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.86a84e05.chunk.js.map